server {
  listen 80;
  root   /usr/share/nginx/html;
  index  index.html;

  # 这个配置是为了让 React Router 正常工作
  # 任何找不到的路径都返回 index.html，交由前端路由处理
  location / {
    try_files $uri /index.html;
  }

  # 【关键】这里是反向代理，替代了 vercel.json 的功能
  # 当浏览器访问 /decide 时，Nginx 会把这个请求转发给后端服务
  location /decide {
    # 注意：这里的 magi-system 是后端在 Sealos 中的服务名，端口是 3001
    # 我们稍后会在 Sealos 上把后端服务命名为 magi-system
    proxy_pass http://magi-system:3001/decide;
  }
}